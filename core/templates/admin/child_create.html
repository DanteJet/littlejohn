{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container my-4" style="max-width: 840px;">
  <div class="card shadow-sm border-0">
    <div class="card-header d-flex align-items-center justify-content-between" style="background:#d8f3dc;">
      <h5 class="m-0">–°–æ–∑–¥–∞—Ç—å —É—á–µ–Ω–∏–∫–∞</h5>
      <a class="btn btn-sm btn-outline-secondary" href="{% url 'children_list' %}" title="–ö —Å–ø–∏—Å–∫—É –¥–µ—Ç–µ–π">‚Üê –ù–∞–∑–∞–¥</a>
    </div>

    <div class="card-body">
      <form method="post" novalidate class="grid-form">
        {% csrf_token %}
        {% if form.non_field_errors %}
            <div class="alert alert-danger">{{ form.non_field_errors }}</div>
        {% endif %}
        <!-- –¢–∏–ø —É—á–µ–Ω–∏–∫–∞ -->
        <div class="row g-3 align-items-center mb-3">
            <div class="col-12 col-sm-4">
              <label class="form-label mb-0">–¢–∏–ø —É—á–µ–Ω–∏–∫–∞</label>
            </div>
            <div class="col-12 col-sm-8">
              <div id="studentType" class="student-type-toggle" role="button" aria-label="–¢–∏–ø —É—á–µ–Ω–∏–∫–∞">
                <div class="knob"></div>
                <div class="labels">
                  <span class="lbl-child">–†–µ–±—ë–Ω–æ–∫</span>
                  <span class="lbl-adult">–í–∑—Ä–æ—Å–ª—ã–π</span>
                </div>
              </div>
              {# –ü—Ä—è—á–µ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ä–∞–¥–∏–æ, –Ω–æ –æ—Å—Ç–∞–≤–ª—è–µ–º –≤ DOM #}
              <div class="d-none">
                {% for sub in form.student_type %}{{ sub }}{% endfor %}
              </div>
            </div>
          </div>
        
        <!-- –ë–ª–æ–∫ –¥–ª—è —Ä–µ–±—ë–Ω–∫–∞ (—Ä–æ–¥–∏—Ç–µ–ª—å) -->
        <div id="block-child">
             <!-- –†–æ–¥–∏—Ç–µ–ª—å -->
            <div class="row g-3 align-items-center mb-3">
                <div class="col-12 col-sm-4">
                <label class="form-label mb-0" for="{{ form.parent.id_for_label }}">–†–æ–¥–∏—Ç–µ–ª—å</label>
                </div>
                <div class="col-12 col-sm-8">
                {{ form.parent }}
                {% if form.parent.errors %}<div class="invalid-feedback d-block">{{ form.parent.errors|striptags }}</div>{% endif %}
                </div>
            </div>
        </div>
        
        <!-- –ë–ª–æ–∫ –¥–ª—è –≤–∑—Ä–æ—Å–ª–æ–≥–æ (–ª–æ–≥–∏–Ω/email/–ø–∞—Ä–æ–ª—å) -->
        <div id="block-adult" style="display:none;">
            <div class="row g-3 align-items-center mb-3">
            <div class="col-12 col-sm-4"><label class="form-label mb-0" for="{{ form.account_username.id_for_label }}">–õ–æ–≥–∏–Ω</label></div>
            <div class="col-12 col-sm-8">{{ form.account_username }}</div>
            </div>
            <div class="row g-3 align-items-center mb-3">
            <div class="col-12 col-sm-4"><label class="form-label mb-0" for="{{ form.account_email.id_for_label }}">Email</label></div>
            <div class="col-12 col-sm-8">{{ form.account_email }}</div>
            </div>
            <div class="row g-3 align-items-center mb-3">
            <div class="col-12 col-sm-4"><label class="form-label mb-0" for="{{ form.account_password.id_for_label }}">–ü–∞—Ä–æ–ª—å</label></div>
            <div class="col-12 col-sm-8">{{ form.account_password }}</div>
            </div>
        </div>
  

        <!-- –ò–º—è -->
        <div class="row g-3 align-items-center mb-3">
          <div class="col-12 col-sm-4">
            <label class="form-label mb-0" for="{{ form.first_name.id_for_label }}">–ò–º—è</label>
          </div>
          <div class="col-12 col-sm-8">
            {{ form.first_name }}
            {% if form.first_name.errors %}<div class="invalid-feedback d-block">{{ form.first_name.errors|striptags }}</div>{% endif %}
          </div>
        </div>

        <!-- –§–∞–º–∏–ª–∏—è -->
        <div class="row g-3 align-items-center mb-3">
          <div class="col-12 col-sm-4">
            <label class="form-label mb-0" for="{{ form.last_name.id_for_label }}">–§–∞–º–∏–ª–∏—è</label>
          </div>
          <div class="col-12 col-sm-8">
            {{ form.last_name }}
            {% if form.last_name.errors %}<div class="invalid-feedback d-block">{{ form.last_name.errors|striptags }}</div>{% endif %}
          </div>
        </div>

        <!-- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è -->
        <div class="row g-3 align-items-center mb-3">
          <div class="col-12 col-sm-4">
            <label class="form-label mb-0" for="{{ form.birth_date.id_for_label }}">–î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è</label>
          </div>
          <div class="col-12 col-sm-8">
            <div class="input-group">
              <span class="input-group-text"><i class="bi bi-calendar3"></i></span>
              {{ form.birth_date }}
            </div>
            {% if form.birth_date.errors %}<div class="invalid-feedback d-block">{{ form.birth_date.errors|striptags }}</div>{% endif %}
          </div>
        </div>

        <!-- –ü–æ–ª (—Ä–∞–¥–∏–æ-–∫–Ω–æ–ø–∫–∏) -->
        <div class="row g-3 align-items-center mb-3">
          <div class="col-12 col-sm-4">
            <label class="form-label mb-0">–ü–æ–ª</label>
          </div>
          <div class="col-12 col-sm-8">
            <div class="btn-group" role="group" aria-label="–í—ã–±–æ—Ä –ø–æ–ª–∞">
              {% for sub in form.gender %}
                {{ sub.tag }}
                <label class="btn btn-outline-secondary" for="{{ sub.id_for_label }}">
                  {% if sub.choice_label == '–ú–∞–ª—å—á–∏–∫' %}üë¶{% elif sub.choice_label == '–î–µ–≤–æ—á–∫–∞' %}üëß{% else %}üßí{% endif %}
                  {{ sub.choice_label }}
                </label>
              {% endfor %}
            </div>
            {% if form.gender.errors %}<div class="invalid-feedback d-block">{{ form.gender.errors|striptags }}</div>{% endif %}
          </div>
        </div>

        <!-- –ü—Ä–∏–º–µ—á–∞–Ω–∏—è -->
        <div class="row g-3 align-items-start mb-3">
          <div class="col-12 col-sm-4">
            <label class="form-label mb-0" for="{{ form.notes.id_for_label }}">–ü—Ä–∏–º–µ—á–∞–Ω–∏—è</label>
          </div>
          <div class="col-12 col-sm-8">
            {{ form.notes }}
            {% if form.notes.errors %}<div class="invalid-feedback d-block">{{ form.notes.errors|striptags }}</div>{% endif %}
          </div>
        </div>

        <div class="text-end">
          <button class="btn btn-success px-4" type="submit">–°–æ–∑–¥–∞—Ç—å</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
